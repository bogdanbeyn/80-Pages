const { PrismaClient } = require('@prisma/client');
const bcrypt = require('bcryptjs');

const prisma = new PrismaClient();

// Данные 
const pagesData = [
  // Город (13 страниц)
  { title: "Ленинград (с 1991 года - Санкт-Петербург", content: "Москва - столица Российской Федерации, крупнейший город страны. Основана в 1147 году князем Юрием Долгоруким. Город расположен на берегах реки Москвы и является политическим, экономическим и культурным центром России.", category: "Город", imagePath: "/uploads/moscow.jpg" },
  { title: "Одесса", content: "Санкт-Петербург был основан Петром I в 1703 году. Город известен своими дворцами, музеями и белыми ночами. Долгое время был столицей Российской империи.", category: "Город", imagePath: "/uploads/spb.jpg" },
  { title: "Севастополь", content: "Один из древнейших городов России, упоминается в летописях с 859 года. Был центром Новгородской республики и важным торговым центром на пути из варяг в греки.", category: "Город", imagePath: "/uploads/novgorod.jpg" },
  { title: "Волгоград (до 1961 года — Сталинград) ", content: "Псков - древний русский город, известный своей мощной крепостью. Был важным форпостом на западных границах Руси и выдержал множество осад.", category: "Город", imagePath: "/uploads/pskov.jpg" },
  { title: "Киев", content: "Смоленск - один из древнейших городов России, известный как 'щит России'. Расположен на важном торговом пути и неоднократно подвергался нападениям.", category: "Город", imagePath: "/uploads/smolensk.jpg" },
  { title: "Брестская крепость", content: "Тверь - старинный русский город на берегах Волги. Был центром Тверского княжества и соперничал с Москвой за лидерство в объединении русских земель.", category: "Город", imagePath: "/uploads/tver.jpg" },
  { title: "Москва", content: "Ростов Великий - один из древнейших городов России, центр Ростово-Суздальской земли. Известен своим кремлем и колокольными звонами.", category: "Город", imagePath: "/uploads/rostov.jpg" },
  { title: "Керчь", content: "Суздаль - небольшой город во Владимирской области, известный своими древними церквями и монастырями. Входит в Золотое кольцо России.", category: "Город", imagePath: "/uploads/suzdal.jpg" },
  { title: "Новороссийск", content: "Владимир был столицей Владимиро-Суздальского княжества. Известен своими белокаменными соборами и Золотыми воротами.", category: "Город", imagePath: "/uploads/vladimir.jpg" },
  { title: "Минск", content: "Ярославль - один из красивейших городов России, основанный Ярославом Мудрым. Известен своими церквями и архитектурой XVII века.", category: "Город", imagePath: "/uploads/yaroslavl.jpg" },
  { title: "Тула", content: "Кострома - старинный город на Волге, где был призван на царство Михаил Романов. Известен Ипатьевским монастырем и торговыми рядами.", category: "Город", imagePath: "/uploads/kostroma.jpg" },
  { title: "Мурманск", content: "Нижний Новгород - крупный город на слиянии Волги и Оки. Основан в 1221 году, был важным торговым центром и местом проведения знаменитой ярмарки.", category: "Город", imagePath: "/uploads/nizhny.jpg" },
  { title: "Смоленск", content: "Казань - столица Республики Татарстан, город с богатой историей и культурой. Известен своим кремлем и смешением русской и татарской культур.", category: "Город", imagePath: "/uploads/kazan.jpg" },

  // Герой (20 страниц)
  { title: "Александр Невский - защитник земли русской", content: "Александр Невский - великий князь, полководец и святой. Прославился победами над шведами на Неве и тевтонскими рыцарями на Чудском озере. Считается защитником православия и русской земли.", category: "Герой", imagePath: "/uploads/nevsky.jpg" },
  { title: "Дмитрий Донской - победитель Мамая", content: "Дмитрий Донской - великий князь московский, одержавший победу над Мамаем в Куликовской битве 1380 года. Эта победа стала важным шагом к освобождению от монголо-татарского ига.", category: "Герой", imagePath: "/uploads/donskoy.jpg" },
  { title: "Иван III - собиратель земель русских", content: "Иван III - великий князь московский, завершивший объединение русских земель вокруг Москвы. При нем Русь окончательно освободилась от монголо-татарского ига.", category: "Герой", imagePath: "/uploads/ivan3.jpg" },
  { title: "Иван IV Грозный - первый царь", content: "Иван Грозный - первый русский царь, расширивший границы России и укрепивший центральную власть. Известен как реформатор и как жестокий правитель.", category: "Герой", imagePath: "/uploads/ivan4.jpg" },
  { title: "Петр I - великий реформатор", content: "Петр I - первый российский император, прорубивший 'окно в Европу'. Провел масштабные реформы, создал регулярную армию и флот, основал Санкт-Петербург.", category: "Герой", imagePath: "/uploads/peter1.jpg" },
  { title: "Екатерина II Великая", content: "Екатерина II - российская императрица, при которой Россия достигла наибольшего могущества. Провела множество реформ и значительно расширила территорию империи.", category: "Герой", imagePath: "/uploads/catherine2.jpg" },
  { title: "Александр I - победитель Наполеона", content: "Александр I - российский император, при котором Россия одержала победу над Наполеоном в Отечественной войне 1812 года. Был одним из организаторов Священного союза.", category: "Герой", imagePath: "/uploads/alexander1.jpg" },
  { title: "Михаил Кутузов - спаситель Отечества", content: "Михаил Кутузов - великий русский полководец, главнокомандующий русской армией в Отечественной войне 1812 года. Его стратегия привела к разгрому армии Наполеона.", category: "Герой", imagePath: "/uploads/kutuzov.jpg" },
  { title: "Александр Суворов - непобедимый", content: "Александр Суворов - великий русский полководец, не проигравший ни одного сражения. Создал собственную военную науку и воспитал плеяду талантливых военачальников.", category: "Герой", imagePath: "/uploads/suvorov.jpg" },
  { title: "Федор Ушаков - святой адмирал", content: "Федор Ушаков - великий русский флотоводец, не проигравший ни одного морского сражения. Канонизирован Русской православной церковью как святой праведный воин.", category: "Герой", imagePath: "/uploads/ushakov.jpg" },
  { title: "Михаил Ломоносов - первый русский ученый", content: "Михаил Ломоносов - первый русский ученый мирового значения, поэт, художник, историк. Основал Московский университет и внес огромный вклад в развитие науки.", category: "Герой", imagePath: "/uploads/lomonosov.jpg" },
  { title: "Александр Пушкин - солнце русской поэзии", content: "Александр Пушкин - великий русский поэт, создатель современного русского литературного языка. Его творчество стало основой русской литературы.", category: "Герой", imagePath: "/uploads/pushkin.jpg" },
  { title: "Лев Толстой - великий писатель", content: "Лев Толстой - великий русский писатель, автор 'Войны и мира' и 'Анны Карениной'. Его произведения оказали огромное влияние на мировую литературу.", category: "Герой", imagePath: "/uploads/tolstoy.jpg" },
  { title: "Федор Достоевский - психолог души", content: "Федор Достоевский - великий русский писатель, автор 'Преступления и наказания' и 'Братьев Карамазовых'. Исследовал глубины человеческой души.", category: "Герой", imagePath: "/uploads/dostoevsky.jpg" },
  { title: "Петр Чайковский - великий композитор", content: "Петр Чайковский - великий русский композитор, автор 'Лебединого озера', 'Щелкунчика' и 'Евгения Онегина'. Его музыка известна во всем мире.", category: "Герой", imagePath: "/uploads/chaikovsky.jpg" },
  { title: "Дмитрий Менделеев - создатель таблицы", content: "Дмитрий Менделеев - великий русский химик, создатель периодической таблицы элементов. Его открытие стало основой современной химии.", category: "Герой", imagePath: "/uploads/mendeleev.jpg" },
  { title: "Иван Павлов - нобелевский лауреат", content: "Иван Павлов - великий русский физиолог, лауреат Нобелевской премии. Создал учение о высшей нервной деятельности и условных рефлексах.", category: "Герой", imagePath: "/uploads/pavlov.jpg" },
  { title: "Константин Циолковский - отец космонавтики", content: "Константин Циолковский - русский ученый, основоположник теоретической космонавтики. Его идеи легли в основу современной ракетной техники.", category: "Герой", imagePath: "/uploads/tsiolkovsky.jpg" },
  { title: "Юрий Гагарин - первый космонавт", content: "Юрий Гагарин - первый человек в космосе, совершивший полет 12 апреля 1961 года. Его подвиг открыл новую эру в истории человечества.", category: "Герой", imagePath: "/uploads/gagarin.jpg" },
  { title: "Георгий Жуков - маршал Победы", content: "Георгий Жуков - великий советский полководец, маршал Советского Союза. Сыграл ключевую роль в победе над фашизмом во Второй мировой войне.", category: "Герой", imagePath: "/uploads/zhukov.jpg" },

// Событие (20 страниц)
  { title: "Великая Отечественная война - 1941-1945", content: "Великая Отечественная война - война СССР против нацистской Германии. Завершилась победой советского народа и освобождением Европы от фашизма.", category: "Событие", imagePath: "/uploads/great_patriotic.jpg" },
  { title: "Сталинградская битва - 1942-1943", content: "Сталинградская битва - одно из крупнейших сражений Второй мировой войны, ставшее переломным моментом в борьбе против фашизма.", category: "Событие", imagePath: "/uploads/stalingrad.jpg" },
  { title: "Курская битва - 1943 год", content: "Курская битва - крупнейшее танковое сражение в истории, в котором советские войска окончательно сломили наступательную мощь вермахта.", category: "Событие", imagePath: "/uploads/kursk_battle.jpg" },
  { title: "Первый полет в космос - 1961 год", content: "Первый полет человека в космос - историческое событие, когда Юрий Гагарин на корабле 'Восток' совершил первый в истории космический полет.", category: "Событие", imagePath: "/uploads/first_spaceflight.jpg" },
  { title: "Распад СССР - 1991 год", content: "Распад СССР - историческое событие, завершившее существование Советского Союза и положившее начало новой эпохе в истории России и других республик.", category: "Событие", imagePath: "/uploads/ussr_collapse.jpg" },

  // Письмо (10 страниц)
  { title: "Письмо князя Владимира о крещении", content: "Историческое письмо князя Владимира, в котором он описывает процесс принятия христианства и крещения киевлян. Документ показывает важность этого события для становления русской государственности.", category: "Письмо", imagePath: "/uploads/vladimir_letter.jpg" },
  { title: "Послание митрополита Илариона", content: "Послание митрополита Илариона 'Слово о законе и благодати' - одно из первых произведений древнерусской литературы, прославляющее русскую землю и ее правителей.", category: "Письмо", imagePath: "/uploads/hilarion_letter.jpg" },
  { title: "Письмо Александра Невского", content: "Письмо Александра Невского, в котором он излагает свою политику по отношению к Золотой Орде и западным соседям. Документ показывает мудрость великого князя.", category: "Письмо", imagePath: "/uploads/nevsky_letter.jpg" },
  { title: "Духовная грамота Дмитрия Донского", content: "Духовная грамота Дмитрия Донского - завещание великого князя, в котором он распределяет земли между сыновьями и дает наставления по управлению княжеством.", category: "Письмо", imagePath: "/uploads/donskoy_will.jpg" },
  { title: "Письмо Ивана Грозного Курбскому", content: "Переписка Ивана Грозного с князем Курбским - уникальный документ, показывающий взгляды царя на самодержавие и его отношения с боярством.", category: "Письмо", imagePath: "/uploads/ivan_kurbsky.jpg" },
  { title: "Письмо Петра I о реформах", content: "Письмо Петра I, в котором он излагает свои планы по модернизации России и созданию регулярной армии и флота. Документ показывает масштаб реформаторских замыслов царя.", category: "Письмо", imagePath: "/uploads/peter_reforms.jpg" },
  { title: "Наказ Екатерины II", content: "Наказ Екатерины II - документ, в котором императрица излагает свои взгляды на просвещенную монархию и необходимость реформ в России.", category: "Письмо", imagePath: "/uploads/catherine_nakaz.jpg" },
  { title: "Письмо Пушкина о русской литературе", content: "Письмо Александра Пушкина, в котором он рассуждает о развитии русской литературы и роли писателя в обществе. Документ показывает взгляды великого поэта.", category: "Письмо", imagePath: "/uploads/pushkin_literature.jpg" },
  { title: "Письмо Толстого о войне и мире", content: "Письмо Льва Толстого, в котором он объясняет замысел романа 'Война и мир' и свои взгляды на историю и роль личности в ней.", category: "Письмо", imagePath: "/uploads/tolstoy_war_peace.jpg" },
  { title: "Письмо Гагарина с орбиты", content: "Письмо Юрия Гагарина, написанное им во время первого космического полета. Документ передает эмоции первого космонавта и его мысли о будущем космонавтики.", category: "Письмо", imagePath: "/uploads/gagarin_letter.jpg" },

  // Памятник (5 страниц)
  { title: "Памятник Минину и Пожарскому", content: "Памятник Минину и Пожарскому на Красной площади - первый скульптурный памятник в Москве, установленный в честь освободителей Москвы от польских интервентов.", category: "Памятник", imagePath: "/uploads/minin_pozharsky.jpg" },
  { title: "Медный всадник", content: "Медный всадник - памятник Петру I в Санкт-Петербурге, созданный скульптором Фальконе. Символ города и всей эпохи петровских преобразований.", category: "Памятник", imagePath: "/uploads/bronze_horseman.jpg" },
  { title: "Памятник Александру III", content: "Памятник Александру III в Санкт-Петербурге - монумент, установленный в честь императора, при котором Россия достигла экономического расцвета.", category: "Памятник", imagePath: "/uploads/alexander3_monument.jpg" },
  { title: "Памятник Пушкину", content: "Памятник Александру Пушкину в Москве - один из самых известных памятников поэту, установленный на Пушкинской площади и ставший символом русской культуры.", category: "Памятник", imagePath: "/uploads/pushkin_monument.jpg" },
  { title: "Памятник Гагарину", content: "Памятник Юрию Гагарину в Москве - монумент первому космонавту, установленный на Ленинском проспекте и символизирующий начало космической эры.", category: "Памятник", imagePath: "/uploads/gagarin_monument.jpg" },

  // Артефакт (5 страниц)
  { title: "Шапка Мономаха", content: "Шапка Мономаха - главная регалия русских царей, символ самодержавной власти. По легенде, была подарена византийским императором князю Владимиру Мономаху.", category: "Артефакт", imagePath: "/uploads/monomakh_cap.jpg" },
  { title: "Царь-пушка", content: "Царь-пушка - огромное артиллерийское орудие, отлитое в XVI веке. Хотя никогда не стреляла, стала символом мощи русского оружия.", category: "Артефакт", imagePath: "/uploads/tsar_cannon.jpg" },
  { title: "Царь-колокол", content: "Царь-колокол - самый большой колокол в мире, отлитый в XVIII веке. Хотя никогда не звонил, стал символом русской колокольной традиции.", category: "Артефакт", imagePath: "/uploads/tsar_bell.jpg" },
  { title: "Алмаз 'Орлов'", content: "Алмаз 'Орлов' - один из самых известных драгоценных камней в мире, украшающий скипетр российских императоров. Символ богатства и могущества России.", category: "Артефакт", imagePath: "/uploads/orlov_diamond.jpg" },
  { title: "Скипетр и держава", content: "Скипетр и держава - главные регалии российских императоров, символы самодержавной власти. Использовались при коронации всех русских царей и императоров.", category: "Артефакт", imagePath: "/uploads/scepter_orb.jpg" }
];

async function main() {
  try {
    console.log('Начинаем заполнение базы данных...');

    // очищаем базу
    await prisma.comment.deleteMany();
    await prisma.page.deleteMany();
    await prisma.category.deleteMany();
    await prisma.user.deleteMany();

    console.log('Очистка базы данных завершена');

    // создаем пользователей
    const hashedPassword = await bcrypt.hash('password123', 12);
    
    const admin = await prisma.user.create({
      data: {
        name: 'Администратор',
        email: 'admin@example.com',
        password: hashedPassword,
        role: 'ADMIN'
      }
    });

    const user = await prisma.user.create({
      data: {
        name: 'Пользователь',
        email: 'user@example.com',
        password: hashedPassword,
        role: 'USER'
      }
    });

    console.log('Пользователи созданы');

    // создаем категории
    const categories = await Promise.all([
      prisma.category.create({ data: { name: 'Город' } }),
      prisma.category.create({ data: { name: 'Герой' } }),
      prisma.category.create({ data: { name: 'Событие' } }),
      prisma.category.create({ data: { name: 'Письмо' } }),
      prisma.category.create({ data: { name: 'Памятник' } }),
      prisma.category.create({ data: { name: 'Артефакт' } })
    ]);

    console.log('Категории созданы');

    // создаем страницы
    const categoryMap = {};
    categories.forEach(cat => {
      categoryMap[cat.name] = cat.id;
    });

    for (const pageData of pagesData) {
        await prisma.page.create({
            data: {
            title: pageData.title,
            content: pageData.content,
            imagePath: pageData.imagePath,
            categoryId: categoryMap[pageData.category],
            createdById: admin.id
            }
        });
        }

    console.log('✅ Страницы созданы');

    // // создаем комментарии
    // const pages = await prisma.page.findMany({ take: 5 });
    
    // for (const page of pages) {
    //   await prisma.comment.create({
    //     data: {
    //       text: 'Отличная статья о ${page.title}! Очень интересно и познавательно.',
    //       pageId: page.id,
    //       userId: user.id
    //     }
    //   });
    // }

    console.log('Комментарии созданы');

    console.log('База данных успешно заполнена!');
    console.log('Администратор: admin@example.com / password123');
    console.log('Пользователь: user@example.com / password123');

  } catch (error) {
    console.error('Ошибка при заполнении базы данных:', error);
  } finally {
    await prisma.$disconnect();
  }
}

main();